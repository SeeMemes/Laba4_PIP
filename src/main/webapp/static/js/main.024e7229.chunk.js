/*! For license information please see main.024e7229.chunk.js.LICENSE.txt */
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{16:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),r=n.n(s),i=n(8),c=n.n(i),o=(n(16),n(27)),l=n(28),u=n(37),d=n(36),h=n(9),p=n(29);var m=Object(p.a)((function(e,t){switch(t.type){case"TOKEN_CLEAR":return sessionStorage.clear(),{token:t.token};case"TOKEN_UPDATE":return sessionStorage.setItem("access_token",t.rtoken),{token:t.token};case"NEW_TOKEN":return sessionStorage.setItem("access_token",t.token),sessionStorage.setItem("refresh_token",t.rtoken),{token:t.token};default:return e}}),{token:sessionStorage.getItem("access_token")});m.subscribe((function(){return console.log(m.getState())}));var j=m,v=n(6),b=n(14),f=n(15),g=n(31);var x=function(e){return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsxs)("form",{children:[Object(a.jsx)(b.Messages,{ref:function(t){return e.messageText.current=t}}),Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"x_value",className:"p-sm-2 p-md-4 p-xl-6",children:"X:"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:Object(a.jsx)(f.InputNumber,{id:"x_value",value:e.x,onValueChange:function(t){return e.setX(t.value)},mode:"decimal",min:-3,max:5,minFractionDigits:1,maxFractionDigits:3,placeholder:"Enter X [-3;5]"})})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"y_value",className:"p-sm-2 p-md-4 p-xl-6",children:"Y:"}),Object(a.jsxs)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:[Object(a.jsx)(g.Slider,{value:e.y,onChange:function(t){return e.setY(t.value)},"aria-labelledby":"non-linear-slider",step:.001,min:-3,max:5}),Object(a.jsx)("br",{}),Object(a.jsx)(f.InputNumber,{id:"y_value",value:e.y,disabled:!0,mode:"decimal",min:-3,max:5,maxFractionDigits:0,placeholder:"Choose Y [-3;5]"})]})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"r_value",className:"p-sm-2 p-md-4 p-xl-6",children:"R:"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 p-col",children:Object(a.jsx)(f.InputNumber,{id:"r_value",value:e.r,onValueChange:function(t){return e.setR(t.value)},mode:"decimal",min:.01,max:5,minFractionDigits:1,maxFractionDigits:2,placeholder:"Enter R [0.01;5]"})})]}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6  p-align-center p-col",children:Object(a.jsx)(v.Button,{type:"button",onClick:function(){e.validate()&&fetch("/api/points/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(j.getState().token)},body:JSON.stringify({key:j.getState().token,x:e.x,y:e.y,r:e.r})}).then((function(t){return t.text().then((function(n){t.ok&&e.setResults(JSON.parse(n).data)}))}))},className:"p-button-primary p-margin",label:"Submit",icon:"pi"})}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3 p-align-center p-col",children:Object(a.jsx)(v.Button,{type:"button",onClick:function(){fetch("/api/points/clear",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(j.getState().token)},body:JSON.stringify({key:j.getState().token})}).then((function(t){t.ok&&e.setResults(null)}))},className:"p-button-primary",label:"Clear",icon:"pi"})})]})]})})},O=function(){j.dispatch({type:"TOKEN_CLEAR",token:null})};var y=function(){return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3",children:Object(a.jsx)(v.Button,{type:"button",onClick:O,className:"p-button-primary p-margin",label:"Logout"})})})},k=n(11),N=n(32);var w=function(e){var t=Object(a.jsx)(v.Button,{type:"button",icon:"pi pi-refresh",className:"p-button-text"}),n=Object(a.jsx)(v.Button,{type:"button",icon:"pi pi-cloud",className:"p-button-text"});return Object(a.jsx)("div",{children:Object(a.jsxs)(N.DataTable,{id:"result_table",value:e.results,paginator:!0,rows:10,paginatorLeft:t,paginatorRight:n,children:[Object(a.jsx)(k.Column,{field:"x",header:"x"}),Object(a.jsx)(k.Column,{field:"y",header:"y"}),Object(a.jsx)(k.Column,{field:"r",header:"r"}),Object(a.jsx)(k.Column,{field:"result",header:"result"})]})})};function S(e){return e<0?-1:1}function T(e,t,n,a,s){var r=t-a;e.font="15px courier new",e.beginPath(),e.lineWidth=2,e.moveTo(t,n),e.lineTo(a,s),e.stroke(),e.beginPath(),e.moveTo(a,s),e.lineTo(a+7*S(r),s+7*S(r)),e.lineTo(a-7,s+7),e.fill()}function C(e,t){return e>t?t/6:e/6}function _(e,t,n,a){var s;e.strokeStyle="black",e.fillStyle="black";var r=e.canvas.height*t,i=e.canvas.width*n,c=(e.canvas.height-r)/2,o=(e.canvas.width-i)/2;s=C(i,r),T(e,o,.5*e.canvas.height,e.canvas.width-o,.5*e.canvas.height),e.fillText("X",e.canvas.width-o-10,.5*e.canvas.height+15),T(e,.5*e.canvas.width,e.canvas.height-c,.5*e.canvas.width,c),e.fillText("Y",.5*e.canvas.width+10,c+15);for(var l=0,u=-2;u<=2;u++)0!=u&&(e.fillText(a[l],e.canvas.width/2+6,e.canvas.height/2+s*u+5),e.beginPath(),e.moveTo(e.canvas.width/2-4,e.canvas.height/2+s*u),e.lineTo(e.canvas.width/2+4,e.canvas.height/2+s*u),e.stroke(),l++);for(var d=3,h=-2;h<=2;h++)0!=h&&(e.fillText(a[d],e.canvas.width/2+s*h-5,e.canvas.height/2-10),e.beginPath(),e.moveTo(e.canvas.width/2+s*h,e.canvas.height/2+4),e.lineTo(e.canvas.width/2+s*h,e.canvas.height/2-4),e.stroke(),d--)}function P(e,t){var n=function(e){var t=[];return null!=e?(e=parseFloat(e),t[0]=e,t[1]=e/2,t[2]=-e/2,t[3]=-e):t=["R","R/2","-R/2","-R"],t}(e);t.clearRect(0,0,t.canvas.width,t.canvas.height);C(t.canvas.width,t.canvas.height);t.strokeStyle="#ffc700",t.fillStyle="#ffc700";var a=C(t.canvas.width,t.canvas.height),s=t.canvas.width/2,r=t.canvas.height/2;t.beginPath(),t.moveTo(s,r),t.arc(s,r,a,0,Math.PI/2),t.fill(),t.beginPath(),t.moveTo(s,r),t.lineTo(s-a,r),t.lineTo(s,r-a),t.fill(),t.beginPath(),t.moveTo(s,r),t.lineTo(s-2*a,r),t.lineTo(s-2*a,r+2*a),t.lineTo(s,r+2*a),t.fill(),_(t,1,1,n),_(t,1,1,n)}function E(e,t,n,a,s,r,i){var c;c=0==n?0:2*C(i.canvas.width,i.canvas.height)/n,i.strokeStyle="rgba(".concat(s,",").concat(r,",0,").concat(a,")"),i.fillStyle="rgba(".concat(s,",").concat(r,",0,").concat(a,")"),i.beginPath(),i.moveTo(i.canvas.width/2+e*c,i.canvas.height/2-t*c),i.arc(i.canvas.width/2+e*c,i.canvas.height/2-t*c,4,0,2*Math.PI),i.fill()}function R(e,t,n){if(t.length>0){var a,s=1;a=t.length>5?t.length-5:0;for(var r=t.length-1;r>=a;r--)console.log(t[r].x+"                           "+parseFloat(t[r].x)),"true"==t[r].result?E(parseFloat(t[r].x),parseFloat(t[r].y),parseFloat(e),5/(5*s),0,255,n):E(parseFloat(t[r].x),parseFloat(t[r].y),parseFloat(e),5/(5*s),255,0,n),s++}}var F=function(e){var t=Object(s.useRef)();return e.key,Object(s.useEffect)((function(){null!=e.results&&(P(e.r,t.current.getContext("2d")),R(e.r,e.results,t.current.getContext("2d")))}),[P,R,e]),Object(a.jsx)("div",{children:Object(a.jsx)("canvas",{className:"p-align-center",width:"750",height:"500",ref:t,onClick:function(n){!function(e,t,n,a,s,r,i){var c=a,o=4*C(n.canvas.width,n.canvas.height)/c,l=t.nativeEvent.offsetX,u=t.nativeEvent.offsetY,d=(2*l-n.canvas.width)/o,h=-(2*u-n.canvas.height)/o;console.log((2*l-n.canvas.width)/o),s(d,-3,5)&&s(h,-3,5)&&s(a,.01,5)?fetch("/api/points/add",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(j.getState().token)},body:JSON.stringify({key:j.getState().token,x:d,y:h,r:a})}).then((function(e){return e.text().then((function(t){e.ok&&(i(JSON.parse(t).data),console.log("\u0412\u044b\u0432\u043e\u0434 \u043e\u0442 \u043a\u043b\u0438\u043a\u0430 \u043f\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044e: ",JSON.parse(t).data))}))})):null!==r.current&&r.current.show({severity:"warn",summary:"Validation error"})}(0,n,t.current.getContext("2d"),e.r,e.validateNumber,e.messageText,e.setResults)}})})};var J,B=function(e){var t=Object(s.useState)(null),n=Object(h.a)(t,2),r=n[0],i=n[1],c=Object(s.useState)(null),o=Object(h.a)(c,2),l=o[0],u=o[1],d=Object(s.useState)(null),p=Object(h.a)(d,2),m=p[0],v=p[1],b=Object(s.useState)(null),f=Object(h.a)(b,2),g=f[0],O=f[1],k=Object(s.useRef)();function N(e,t,n){var a=parseFloat(e);return!isNaN(a)&&a>=t&&a<=n}return Object(s.useEffect)((function(){null===r&&fetch("/api/points/get",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:"Bearer_".concat(j.getState().token)},body:JSON.stringify({key:j.getState().token})}).then((function(e){return e.text().then((function(t){e.ok&&i(JSON.parse(t).data)}))}))})),Object(a.jsxs)("div",{children:[Object(a.jsx)(y,{}),Object(a.jsx)(F,{validateNumber:N,messageText:k,x:l,y:m,r:g,results:r,setResults:i},e.key),Object(a.jsx)(x,{setResults:i,messageText:k,x:l,y:m,r:g,setX:u,setY:v,setR:O,validate:function(){var e=!N(l,-3,5)||!N(m,-3,5)||!N(g,.01,5);return e&&null!==k.current&&k.current.show({severity:"warn",summary:"Validation error"}),!e}},e.key),Object(a.jsx)(w,{results:r},e.key)]})},I=(n(85),n(33)),A=n(34);var D=function(){var e=Object(s.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],i=Object(s.useState)(""),c=Object(h.a)(i,2),o=c[0],l=c[1];return Object(a.jsx)("div",{className:"p-align-center p-fluid",children:Object(a.jsxs)("form",{className:"form_div",children:[Object(a.jsx)(b.Messages,{icon:!0,ref:function(e){return J=e}}),Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsxs)("div",{className:"p-field p-grid",children:[Object(a.jsx)("label",{htmlFor:"username",className:"p-sm-2 p-md-4 p-xl-6",children:"Username"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5",children:Object(a.jsx)(I.InputText,{id:"username",value:n,onChange:function(e){return r(e.target.value)}})})]}),Object(a.jsxs)("div",{className:"p-field p-grid ",children:[Object(a.jsx)("label",{htmlFor:"password",className:"p-sm-2 p-md-4 p-xl-6",children:"Password"}),Object(a.jsx)("div",{className:"p-sm-12 p-md-7 p-xl-5 ",children:Object(a.jsx)(A.Password,{id:"password",value:o,onChange:function(e){return l(e.target.value)}})})]}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6  p-align-center",children:Object(a.jsx)(v.Button,{type:"button",onClick:function(e){var t={username:n,password:o};0!=n.length&&o.length?fetch("/lk/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json().then((function(t){e.ok?(j.dispatch({type:"NEW_TOKEN",token:t.key,rtoken:t.refresh_token}),console.log("JSON \u0432\u0445\u043e\u0434\u0430: ",t)):403===e.status?J.show({severity:"error",summary:t.description}):J.show({severity:"error",summary:"Unhandled error"})}))})):J.show({severity:"error",summary:"Enter login and password"})},className:"p-button-primary p-margin",label:"Sign in",icon:"pi"})}),Object(a.jsx)("div",{className:"p-sm-12 p-md-6 p-xl-3 p-align-center",children:Object(a.jsx)(v.Button,{type:"button",onClick:function(e){var t={username:n,password:o};0!=n.length&&o.length?fetch("/lk/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json;charset=utf-8"}}).then((function(e){return e.json().then((function(t){e.ok?(j.dispatch({type:"NEW_TOKEN",token:t.key,rtoken:t.refresh_token}),console.log("JSON \u0432\u0445\u043e\u0434\u0430: ",t)):403===e.status?J.show({severity:"error",summary:t.description}):J.show({severity:"error",summary:"Unhandled error"})}))})):J.show({severity:"error",summary:"Enter login and password"})},className:"p-button-primary ",label:"Register",icon:"pi"})})]})]})})},K=n(35),M=(n(88),n(89),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.store.subscribe((function(){e.setState({reduxState:e.props.store.getState()})}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"p-grid p-justify-center wrapper",children:Object(a.jsx)("div",{className:"p-col p-sm-12 p-md-8 p-xl-5",children:Object(a.jsx)(K.Panel,{header:"Provotorov Aleksandr P3210 10532",children:null!==this.props.store.getState().token?Object(a.jsx)(B,{},this.props.store.getState().token):Object(a.jsx)(D,{})})})})}}]),n}(s.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(M,{store:j})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[90,1,2]]]);
//# sourceMappingURL=main.024e7229.chunk.js.map